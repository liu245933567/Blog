---
post: true
title: 常用正则表达式
date: 2024-04-01
categories:
  - 编程技术
tags:
  - 正则
---

## 身份证号码

正则匹配身份证号 分为 18 位和 15 位

首先写正则之前我们先明白身份证号的结构 18 位

```js
/**
 * 地区： ([1-6][1-9]|50)\d{4}  // 补充重庆地区50
 * 年的前两位： (18|19|20)            1800-2399
 * 年的后两位： \d{2}
 * 月份：((0[1-9])|10|11|12)
 * 天数： (([0-2][1-9])|10|20|30|31)      闰年不能禁止29+
 * 三位顺序码： \d{3}
 * 校验码： [0-9Xx]
 */
let _ID_Re18 =
  /^([1-6][1-9]|50)\d{4}(18|19|20)\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;
```

身份证号的结构 15 位

```js
/**
 * 地区：[1-6][1-9]\d{4}
 * 年份只有后两位：\d{2}
 * 月份：((0[1-9])|10|11|12)
 * 天数：(([0-2][1-9])|10|20|30|31)      闰年不能禁止29+
 * 三位顺序码： \d{3}
 */
let _IDRe15 =
  /^([1-6][1-9]|50)\d{4}\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}$/;
```

终极版：同时校验 18 位和 15 位的身份证

```js
if (_IDRe18.test(idVal) || _IDre15.test(idVal)) {
  console.log(" 验证通过 ");
} else {
  console.log(" 验证未通过 ");
}
```

根据身份证号提取出生日期和性别

```js
const ID_RRX18 =
  /^([1-6][1-9]|50)\d{4}(18|19|20)\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;

const ID_RRX15 =
  /^([1-6][1-9]|50)\d{4}\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}$/;

if (ID_RRX18.test(idNo) || ID_RRX15.test(idNo)) {
  const birthdayStr =
    idNo.length === 15 ? "19" + idNo.substring(6, 12) : idNo.substring(6, 14);

  const year = birthdayStr.substring(0, 4);
  const month = birthdayStr.substring(4, 6);
  const day = birthdayStr.substring(6);

  const birthday = `${year}-${month}-${day}`;

  // '0': 男 '1'女
  const gender = Number(idNo.slice(-2, -1)) % 2 === 0 ? "1" : "0";
}
```
